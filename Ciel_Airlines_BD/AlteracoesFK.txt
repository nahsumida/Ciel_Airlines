-------- ALTERANDO FKS

--------- AEROPORTO

// Excluir fk
ALTER TABLE AEROPORTO DROP CONSTRAINT FK_ID_CIDADE;

// Adicionar metodo cascata
ALTER TABLE AEROPORTO ADD CONSTRAINT FK_ID_CIDADE FOREIGN KEY(ID_CIDADE) REFERENCES CIDADE(ID_CIDADE) ON DELETE CASCADE;

DELETE FROM CIDADE WHERE ID_CIDADE=7;

ALTER TABLE AEROPORTO CHECK CONSTRAINT FK_ID_CIDADE;

------ AERONAVE
ALTER TABLE AERONAVE DROP CONSTRAINT FK_MAPA_ASSENTO;

ALTER TABLE AERONAVE ADD CONSTRAINT FK_MAPA_ASSENTO FOREIGN KEY(MAPA_ASSENTO) REFERENCES MAPA_ASSENTO(ID_MAPA) ON DELETE CASCADE;

------ TRECHO
ALTER TABLE TRECHO DROP CONSTRAINT FK_AERO_SAIDA;
ALTER TABLE TRECHO ADD CONSTRAINT FK_AERO_SAIDA FOREIGN KEY(AERO_SAIDA) REFERENCES AEROPORTO(ID_AEROPORTO) ON DELETE CASCADE;

ALTER TABLE TRECHO DROP CONSTRAINT FK_AERO_CHEGADA;
ALTER TABLE TRECHO ADD CONSTRAINT FK_AERO_CHEGADA FOREIGN KEY(AERO_CHEGADA) REFERENCES AEROPORTO(ID_AEROPORTO) ON DELETE CASCADE;

------ VOO
ALTER TABLE VOO DROP CONSTRAINT FK_TRECHO;
ALTER TABLE VOO ADD CONSTRAINT FK_TRECHO FOREIGN KEY(TRECHO) REFERENCES TRECHO(ID_TRECHO) ON DELETE CASCADE;

ALTER TABLE VOO ADD CONSTRAINT FK_AERONAVE FOREIGN KEY(AERONAVE) REFERENCES AERONAVE(NUM_IDENTIFICACAO) ON DELETE CASCADE;


------ VENDA
ALTER TABLE VENDA DROP CONSTRAINT FK_ID_VOO;
ALTER TABLE VOO ADD CONSTRAINT FK_ID_VOO FOREIGN KEY(ID_VOO) REFERENCES VOO(ID_VOO) ON DELETE CASCADE;
// teste
CREATE TABLE employer (
    idEmployer INT NOT NULL PRIMARY KEY,
    nome VARCHAR(30) NOT NULL
);


CREATE SEQUENCE idEmployer_SEQ START WITH 001 INCREMENT BY 1 MAXVALUE 9999 NOCYCLE NOCACHE;

CREATE TABLE FUNCIONARIO (
    idFuncionario INT NOT NULL PRIMARY KEY,
    idEmployer INT NOT NULL ,
    nomeFunc varchar2(30) NOT NULL
);

CREATE SEQUENCE idFuncionario_SEQ START WITH 001 INCREMENT BY 1 MAXVALUE 9999 NOCYCLE NOCACHE;

ALTER TABLE FUNCIONARIO ADD CONSTRAINT FK_idEmployer FOREIGN KEY(idEmployer) REFERENCES EMPLOYER(idEmployer) ON DELETE CASCADE;
ALTER TABLE FUNCIONARIO DROP CONSTRAINT FK_idEmployer;

INSERT INTO EMPLOYER (IDEMPLOYER, NOME) VALUES (1,'joao');
INSERT INTO EMPLOYER (idEmployer, nome) VALUES (0, 'maria');
INSERT INTO EMPLOYER (idEmployer, nome) VALUES (2, 'francisca');
INSERT INTO EMPLOYER (idEmployer, nome) VALUES (3, 'paulo');

DELETE FROM EMPLOYER WHERE nome = 'maria';

DELETE FROM EMPLOYER WHERE nome = 'joao';

-- Adicionar 3 funcionários fictícios vinculados a empregadores
-- Certifique-se de usar IDs válidos da tabela EMPLOYER

-- Funcionário 1
INSERT INTO FUNCIONARIO (idFuncionario, idEmployer, nomeFunc) VALUES (1, 1, 'Funcionário 1');

-- Funcionário 2
INSERT INTO FUNCIONARIO (idFuncionario, idEmployer, nomeFunc) VALUES (2, 2, 'Funcionário 2');

-- Funcionário 3
INSERT INTO FUNCIONARIO (idFuncionario, idEmployer, nomeFunc) VALUES (3, 3, 'Funcionário 3');

drop table employer;

DROP TABLE FUNCIONARIO;